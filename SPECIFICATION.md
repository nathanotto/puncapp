# PUNC Chapter Management App - Technical Specification**Version:** 1.0  **Date:** January 31, 2026  **Target Platform:** Web (mobile-responsive)  **Implementation:** Next.js, Supabase, Vercel  ---## 1. Overview### 1.1 PurposeWeb application to manage PUNC (Project UNcivilized) chapters - recurring men's groups that meet 1-2 times monthly for personal development, community building, and service projects.### 1.2 Key Objectives- Enable chapter leaders to run structured meetings with built-in facilitation tools- Track member attendance, commitments, and progression through curriculum- Generate validated meeting records for donor funding model- Support PUNC HQ oversight of chapter health and compliance- Facilitate new chapter formation and member onboarding- Support PUNC financially for growth and services ### 1.3 Tech Stack- **Frontend:** Next.js (React)- **Database:** Supabase (PostgreSQL)- **Hosting:** Vercel- **Repository:** GitHub (shared with PUNC for handoff)- **Email/SMS:** TBD (integration layer designed for swappable services)---## 2. Data Model### 2.1 Core Entities#### User (Man)```typescriptUser {  id: uuid  name: string  phone: string // validated with text confirmation  email: string // used as login username, validated   address: string // for proximity matching, must include country and postal code  username: string // nickname for anonymity/display/moniker preference  display_preference: 'real_name' | 'username' // global setting  status: 'unassigned' | 'assigned' | 'inactive'  leader_certified: boolean  leader_certification_date: datetime | null  leader_certification_expiry: datetime | null // can be null for "no expiration"; can be extended if leader leads a Chapter Meeting  created_at: datetime  updated_at: datetime}```#### ChapterMemberType```typescriptChapterMemberType {  id: uuid  chapter_id: uuid -> Chapter  user_id: uuid -> User  member_type: 'regular' | 'contributing'  upgraded_at: datetime | null // when became contributing member}// Regular Member: no funding visibility/prompts// Contributing Member: sees funding status, can donate```#### Chapter```typescriptChapter {  id: uuid  name: string  status: 'forming' | 'open' | 'closed'  max_members: integer // default 12, enforced  meeting_schedule: RecurringSchedule // see below  next_meeting_location: Address  monthly_cost: decimal // default $55  current_balance: decimal // running balance (starts at $0)  funding_status: 'fully_funded' | 'partially_funded' | 'deficit' | 'surplus' // calculated monthly  funding_visibility: boolean // leader controls if members see funding info  created_at: datetime  updated_at: datetime}RecurringSchedule {  frequency: 'weekly' | 'biweekly' | ÔthreeweeklyÕ|ÕmonthlyÕ  day_of_week: integer // 0-6  time: time  location: Address}Address {  street: string  city: string  state: string  country: string // different countries may have different Monthly Funding amounts  zip: string  coordinates: { lat: float, lng: float } // for proximity}```#### ChapterMembership```typescriptChapterMembership {  id: uuid  chapter_id: uuid -> Chapter  user_id: uuid -> User  joined_at: datetime  left_at: datetime | null  is_active: boolean}// Constraint: user can be in max 2 active chapters```#### ChapterRole```typescriptChapterRole {  id: uuid  chapter_id: uuid -> Chapter  user_id: uuid -> User  role_type: 'Chapter Leader' | 'Backup Leader' | 'Outreach Leader' | 'Program Leader' | string // custom allowed, multiple roles allowed, only one role per Chapter allowed  assigned_at: datetime  assigned_by: uuid -> User}// Constraint: user can be leader in max 2 chapters// Constraint: Chapter Leader role requires User.leader_certified = true```#### Meeting```typescriptMeeting {  id: uuid  chapter_id: uuid -> Chapter  scheduled_datetime: datetime  actual_datetime: datetime | null  location: Address  duration_minutes: integer | null  topics: string | null // curriculum topic or freeform  curriculum_module_id: uuid | null -> CurriculumModule  status: 'scheduled' | 'cancelled' | 'completed' | 'validated'  validated_by: uuid | null -> User  validated_at: datetime | null  audio_recording_url: string | null  created_at: datetime  updated_at: datetime}```#### Attendance```typescriptAttendance {  id: uuid  meeting_id: uuid -> Meeting  user_id: uuid -> User  rsvp_status: 'yes' | 'no' | 'maybe' | 'no_response'  attendance_type: 'in_person' | 'video' | 'absent'  checked_in_at: datetime | null // self-check-in timestamp  created_at: datetime  updated_at: datetime}```#### MeetingFeedback```typescriptMeetingFeedback {  id: uuid  meeting_id: uuid -> Meeting  user_id: uuid -> User  value_rating: integer // 1-10 scale  additional_data: jsonb // extensible for future fields  submitted_at: datetime}```#### Commitment```typescriptCommitment {  id: uuid  chapter_id: uuid -> Chapter  made_by: uuid -> User  made_at_meeting: uuid | null -> Meeting  commitment_type: 'stretch_goal' | 'to_member' | 'volunteer_activity' | 'help_favor'  description: text  recipient_id: uuid | null -> User // null for chapter-wide  deadline: datetime | null  status: 'pending' | 'completed' | 'abandoned'  self_reported_status: 'pending' | 'completed' | 'abandoned'  recipient_reported_status: 'pending' | 'completed' | 'abandoned' | null  discrepancy_flagged: boolean  created_at: datetime  updated_at: datetime}// Discrepancy logic:// - If self_reported = 'completed' and recipient_reported is null -> completed// - If self_reported = 'completed' and recipient_reported = 'pending' -> flag discrepancy```#### CurriculumModule```typescriptCurriculumModule {  id: uuid  title: string  description: text  category: string // e.g., "relationship", "fear", "addiction"  exercises: jsonb // structured content  assignments: jsonb  commitment_prompts: jsonb  order_index: integer  punc_managed: boolean // true for official PUNC curriculum  created_at: datetime  updated_at: datetime}```#### CurriculumProgress```typescriptCurriculumProgress {  id: uuid  chapter_id: uuid -> Chapter  user_id: uuid -> User  module_id: uuid -> CurriculumModule  status: 'not_started' | 'in_progress' | 'completed'  insights: text | null  benefits: text | null  completed_at: datetime | null}```#### Badge```typescriptBadge {  id: uuid  user_id: uuid -> User  module_id: uuid -> CurriculumModule  awarded_at: datetime}```#### ChapterFormationRequest```typescriptChapterFormationRequest {  id: uuid  user_id: uuid -> User  requested_location: Address  status: 'waitlist' | 'matched' | 'formed' | 'cancelled'  matched_chapter_id: uuid | null -> Chapter  created_at: datetime  updated_at: datetime}```#### ChapterLedger```typescriptChapterLedger {  id: uuid  chapter_id: uuid -> Chapter  transaction_type: 'monthly_debit' | 'member_contribution' | 'external_donor' | 'adjustment'  amount: decimal // negative for debits, positive for credits  source_user_id: uuid | null -> User // null for external donors or system debits  source_type: 'chapter_member' | 'external_donor' | 'system' | 'punc_admin'  attribution: 'anonymous' | 'attributed' // member choice for contributions  notes: text | null  transaction_date: datetime  created_at: datetime}// Monthly debit: -$55 posted automatically on chapter anniversary day// Funding status calculated from: SUM(amount) for current month```#### Donation```typescriptDonation {  id: uuid  donor_user_id: uuid -> User  recipient_chapter_id: uuid -> Chapter  amount: decimal  frequency: 'one_time' | 'monthly_recurring'  attribution: 'anonymous' | 'show_to_leader' | 'show_to_chapter'  is_active: boolean // for recurring donations  next_charge_date: datetime | null  started_at: datetime  cancelled_at: datetime | null  created_at: datetime  updated_at: datetime}// Supports both own-chapter and cross-chapter donations```### 2.2 PUNC Admin Entities#### LeaderAbsenceFlag```typescriptLeaderAbsenceFlag {  id: uuid  chapter_id: uuid -> Chapter  leader_id: uuid -> User  absence_count: integer  total_meetings: integer  flagged_at: datetime  resolved: boolean}// Trigger: flag when absence_count >= 3 out of last 10 meetings```#### MeetingValidationQueue```typescriptMeetingValidationQueue {  id: uuid  meeting_id: uuid -> Meeting  chapter_id: uuid -> Chapter  submitted_at: datetime  validated_for_donor: boolean  transferred_to_direct_outcomes: boolean  transferred_at: datetime | null}```---## 3. User Roles & Permissions### 3.1 Role Definitions| Role | Scope | Permissions ||------|-------|-------------|| **Unassigned User** | Global | View open chapters nearby, apply to join, request new chapter formation || **Chapter Member** | Chapter-specific | View chapter info, RSVP to meetings, self-check-in, create commitments, complete feedback, view own profile & stats || **Chapter Leader** | Chapter-specific | All member permissions + schedule/modify/cancel meetings, run meeting flow, validate meetings, assign roles, onboard/offboard members, set chapter open/closed status, record audio, manage curriculum selection || **Backup Leader** | Chapter-specific | Identical to Chapter Leader || **Outreach Leader** | Chapter-specific | All member permissions + manage membership applications, onboard new members, manage community activities/volunteer projects || **Program Leader** | Chapter-specific | All member permissions + select curriculum topics, facilitate curriculum progression, enter curriculum data (insights/benefits), manage commitments || **PUNC Admin** | Global | View all chapters, view aggregated stats, manage leader certifications, review meeting validations, manage curriculum library, flag issues, manage chapter formation matching |### 3.2 Permission Matrix| Action | Regular Member | Contributing Member | Outreach | Program | Leader/Backup | PUNC Admin ||--------|----------------|---------------------|----------|---------|---------------|------------|| View chapter dashboard | ? | ? | ? | ? | ? | ? || View funding status | - | ? | - | - | ? | ? || Donate to own chapter | - | ? | ? | ? | ? | - || Donate to other chapters | - | ? | ? | ? | ? | - || Manage recurring donations | - | ? | ? | ? | ? | - || RSVP to meeting | ? | ? | ? | ? | ? | - || Self-check-in attendance | ? | ? | ? | ? | ? | - || Create commitment | ? | ? | ? | ? | ? | - || Update own commitment status | ? | ? | ? | ? | ? | - || View other profiles in chapter | ? | ? | ? | ? | ? | ? || Schedule/modify meetings | - | - | - | - | ? | - || Run meeting flow | - | - | - | - | ? | - || Validate meeting | - | - | - | - | ? | ? || Record audio | - | - | - | - | ? | - || Onboard new member | - | - | ? | - | ? | ? || Offboard member | - | - | - | - | ? | ? || Assign roles | - | - | - | - | ? | ? || Invite contributing members | - | - | - | - | ? | - || Set funding visibility | - | - | - | - | ? | ? || Contact donors | - | - | - | - | ? | - || Set chapter open/closed | - | - | - | - | ? | ? || Select curriculum topic | - | - | - | ? | ? | - || Enter curriculum insights | - | - | - | ? | ? | - || Manage service projects | - | - | ? | - | - | - || Grant leader certification | - | - | - | - | - | ? || View all chapters globally | - | - | - | - | - | ? || Manage curriculum library | - | - | - | - | - | ? || Match formation requests | - | - | - | - | - | ? || Post ledger adjustments | - | - | - | - | - | ? |---## 4. User Stories & Workflows### 4.1 New User Signup & Chapter Discovery**As an unassigned user, I want to find and join a chapter near me**1. Visit PUNChapters.org2. Complete signup form:   - Name, address, phone, email   - Choose username/nickname   - Set display preference (real name or username)3. System shows options:   - **"Join an existing chapter near me"**     - User selects search radius (up to 100 miles)     - System displays open chapters sorted by proximity to user address     - User clicks "Apply to Join" for a chapter     - Application sent to Chapter Leader and Outreach Leader   - **"Join a forming chapter near me"**     - System shows PUNC-managed list of forming chapters in user's area     - User selects chapter and joins waitlist   - **"Request a new chapter near me"**     - User submits ChapterFormationRequest     - Added to geographic waitlist     - System sends confirmation + regular email updates4. User status remains "unassigned" until approved for a chapter**As a chapter leader, I want to approve/reject membership applications**1. Receive notification of new application2. View applicant profile (name, address, request message)3. Click "Approve" or "Reject"4. If approved:   - User status changes to "assigned"   - ChapterMembership record created   - User receives welcome email with next meeting details5. If rejected:   - User receives notification and can apply to other chapters### 4.2 Chapter Formation**As a PUNC admin, I want to match waitlisted users to form a new chapter**1. Navigate to Chapter Formation dashboard2. View geographic clusters of ChapterFormationRequests3. System auto-suggests matches (5+ users within 25 miles)4. Admin reviews suggestions and selects users to match5. Admin assigns a PUNC-certified leader from:   - One of the waitlisted users (if certified)   - External certified leader6. System creates new Chapter with status "forming"7. System sends email to matched users: "Chapter is forming at [location], join? Y/N"8. Users who click "Yes" are onboarded9. When 5+ members confirmed, chapter status changes to "open"### 4.3 Meeting Scheduling & Notifications**As a chapter leader, I want to schedule recurring meetings**1. Navigate to Chapter Settings > Meeting Schedule2. Set recurring pattern:   - Frequency (weekly, biweekly, monthly)   - Day of week   - Time   - Default location (address)3. System auto-generates upcoming meetings for next 6 months4. For each meeting, system sends notification 1 week before + 1 day before5. Members RSVP yes/no via email link or app**As a chapter leader, I want to modify or cancel an individual meeting**1. Navigate to Meetings > Upcoming2. Select meeting to modify3. Change date/time/location or click "Cancel"4. System sends update notification to all chapter members5. Members can update RSVPs### 4.4 Running a Meeting**As a chapter leader, I want to facilitate a structured meeting**1. Navigate to Meetings > Today's Meeting2. Click "Start Meeting"3. **Attendance Check-In**   - Option A: Leader manually marks attendance (in-person/video/absent)   - Option B: Members self-check-in via app (honor system)4. **Lightning Round** (automated timer)   - System displays each member's name with 3-minute timer   - Member shares: what's up in life + commitment status update   - System prompts member to update commitment statuses if pending5. **Main Topic Discussion**   - If curriculum module selected: System displays module content (exercises, prompts)   - If freeform: Leader manually enters topic   - System tracks time spent on topic6. **Commitment Creation**   - System prompts each member to create new commitment   - Member selects type (stretch goal, to specific member, volunteer activity, help/favor)   - Member enters description, optional deadline   - If commitment to another member, system notifies recipient7. **Audio Recording**   - Leader clicks "Start Recording" for end-of-meeting reflections   - System records 3-5 minute audio of member reflections on meeting value   - Leader clicks "Stop Recording"   - Audio automatically uploaded and attached to meeting record8. **Meeting Feedback**   - System prompts each member to rate meeting value (1-10)   - Members submit feedback forms9. Click "End Meeting"### 4.5 Meeting Validation for Funding**As a chapter leader, I want to validate a meeting for donor funding**1. Navigate to Meetings > Recent > [Select Meeting]2. Click "Validate Meeting"3. Review and confirm:   - Date, time, location, duration   - Attendance list (in-person vs video)   - Topic (curriculum or freeform)   - Audio recording present4. Make specific representations:   - ? Meeting took place as scheduled   - ? Attendance is accurate   - ? Topic is accurate   - ? Audio reflects genuine member feedback5. Click "Submit for Validation"6. Meeting status changes to "validated"7. Record added to MeetingValidationQueue for PUNC admin review**As a PUNC admin, I want to process validated meetings for donor reporting**1. Navigate to Admin > Meeting Validation Queue2. Review validated meetings3. For each meeting:   - Listen to audio recording   - Verify attendance and topic align with chapter standards   - Mark as "validated_for_donor"4. Manually export validated meeting data5. Transfer to Direct Outcomes (external service)6. Mark as "transferred_to_direct_outcomes"### 4.6 Commitment Tracking**As a member, I want to track my commitments**1. Navigate to My Profile > Commitments2. View list of commitments:   - Active (pending)   - Completed   - Overdue (past deadline)3. For each commitment, see:   - Type, description, deadline   - Recipient (if applicable)   - Status (self-reported vs recipient-reported if discrepancy)4. Click "Mark Complete" on pending commitment5. If commitment to another member:   - System notifies recipient to confirm   - If recipient marks "Not Complete", system flags discrepancy to Chapter Leader**As a chapter leader, I want to resolve commitment discrepancies**1. Navigate to Chapter Dashboard > Flagged Issues2. View commitment discrepancies:   - Member A says commitment to Member B is complete   - Member B says it's not complete3. Click "View Discrepancy"4. See details and conversation thread5. System suggests: "Discuss at next meeting"6. Leader can manually mark as resolved after discussion### 4.7 Curriculum & Badges**As a program leader, I want to guide the chapter through curriculum**1. Navigate to Chapter > Curriculum2. View available PUNC modules3. Select module for next meeting4. At meeting, system displays module content:   - Exercises (structured activities)   - Assignments (homework between meetings)   - Commitment prompts (suggested stretch goals)5. After meeting, enter curriculum insights:   - Key takeaways from chapter discussion   - Benefits members reported   - Feedback for PUNC on module effectiveness6. System tracks CurriculumProgress for each member7. When module completed, system awards Badge to participating members**As a member, I want to see my badges and curriculum progress**1. Navigate to My Profile2. View Badges section:   - Icons for each completed module   - Completion date   - Module description3. View Curriculum Progress:   - Modules in progress   - Upcoming modules   - Percentage complete across all PUNC curriculum### 4.8 Chapter Funding (Tiered Membership Model)**As a chapter leader, I want to invite members to become contributing members**1. Navigate to Chapter > Members2. Click member name > "Invite to Contributing Membership"3. System sends invitation email:   - "Your chapter leader invites you to become a Contributing Member"   - Explains: access to funding dashboard, ability to support this chapter or others   - "Accept" / "Decline" buttons4. If member accepts:   - ChapterMemberType updated to 'contributing'   - Member sees funding panel on dashboard5. Leader can also enable chapter-wide: Settings > "Allow all members to opt-in as Contributing Members"   - Adds "Become a Contributing Member" button to all regular members' dashboards**As a contributing member, I want to donate to my chapter**1. Navigate to Chapter Dashboard > "Support Our Chapter" panel2. View funding status:   - "Chapter is 80% funded this month"   - Breakdown: "2 external donors ($30) + 3 members ($20) = $50 of $55"   - Current balance: "$120 surplus" or "$45 deficit"3. Click "Donate"4. Choose amount: $5, $10, $20, custom5. Choose frequency: one-time, monthly recurring6. Choose attribution:   - "Anonymous" (leader sees contribution but not my name)   - "Show my name to leader"   - "Show my name to chapter" (appears on funding dashboard)7. Enter payment info (Stripe/PayPal)8. Confirmation: "Thank you! Your chapter is now 90% funded."9. ChapterLedger entry created, Chapter.current_balance updated**As a contributing member, I want to support another chapter**1. Navigate to "Explore" > "Support Other Chapters"2. Filter by:   - Chapters in deficit   - Forming chapters   - Chapters near me (radius)3. View chapter cards:   - Chapter name (or anonymized "Chapter 47 - Austin")   - Funding status: "Needs $30 to reach $55/month"   - Recent topics: "Fear of Men, Addiction, Relationships"   - Member count: "8 members"4. Click "Support This Chapter"5. Same donation flow as own chapter6. Optional: "Send message to chapter leader" (encouragement note)7. Leader of recipient chapter receives notification:   - "A member from another chapter is supporting your chapter!"   - Donor's username (or anonymous) and contribution amount**As a chapter leader, I want to communicate with donors**1. Navigate to Chapter Dashboard > Funding > "Donors" tab2. View donor list:   - Chapter members: names (if attributed), amounts, frequency   - External donors: "External Donor via Direct Outcomes", amounts   - Cross-chapter supporters: "Member from Chapter 23", amounts3. Click "Send Thank You" next to donor4. Pre-filled email template (editable):   - "Dear [Name/Anonymous Supporter],"   - "Thank you for your support of [Chapter Name]. Here's what your contribution enabled this month..."   - Auto-populated: meeting count, topics discussed, member testimonials5. Send email6. Optional: Schedule quarterly update emails (automated)**As a contributing member, I want to manage my donations**1. Navigate to My Dashboard > "My Donations"2. View all donations:   - Own chapter: "$20/month recurring to The Oak Chapter"   - Other chapters: "$10/month to Chapter 47 - Austin"3. For each donation, see:   - Amount, frequency, attribution setting   - Next charge date (if recurring)   - Total contributed to date4. Click "Cancel" next to recurring donation5. Confirmation modal: "Are you sure? You can restart anytime."6. Click "Yes, Cancel"7. Donation.is_active set to false, no future charges8. Email confirmation: "Recurring donation cancelled. Restart anytime from your dashboard."**As a PUNC admin, I want to monitor chapter funding health**1. Navigate to Admin > Funding Analytics2. View dashboard:   - Total chapters: X fully funded, Y partially funded, Z in deficit   - Total member contributions this month: $X   - Total external donor contributions: $Y   - Average deficit per chapter: $Z   - Trend chart: funding health over 12 months3. Filter chapters by funding status4. Flag chapters with 6+ months continuous deficit5. View chapter detail:   - Funding breakdown (donors, members, deficit)   - 12-month ledger history   - Leader communication history with donors6. Post manual adjustment if needed:   - "Grant: $100" (e.g., PUNC covers deficit for new chapter)   - "Correction: -$50" (e.g., fix accounting error)**As a PUNC admin, I want to post monthly debits automatically**1. System runs monthly cron job on each chapter's anniversary day2. For each active chapter:   - Create ChapterLedger entry: transaction_type='monthly_debit', amount=-$55   - Update Chapter.current_balance   - Calculate new funding_status:     - If SUM(ledger entries for current month) >= 0: 'fully_funded' or 'surplus'     - If SUM >= $27.50 (50%): 'partially_funded'     - If SUM < $27.50: 'deficit'3. If chapter newly enters deficit after 6 consecutive months, flag for admin review### 4.9 Leader Certification**As a PUNC admin, I want to certify chapter leaders**1. Navigate to Admin > Users > [Select User]2. Click "Grant Leader Certification"3. Set:   - Certification date (defaults to today)   - Expiration date (or "No expiration")4. Click "Save"5. User.leader_certified set to true6. User can now be assigned Chapter Leader role**As a user, I want to request leader certification**1. Navigate to My Profile > Become a Leader2. Click "Request Certification"3. System shows:   - Prerequisites (e.g., complete Chapter Leadership Course)   - Status: "Not yet enrolled" or "In progress" or "Completed, awaiting certification"4. If prerequisites met, system notifies PUNC admin5. Admin reviews and grants certification### 4.9 Chapter Health Monitoring**As a PUNC admin, I want to monitor chapter leader attendance**1. Navigate to Admin > Chapter Health2. View chapters with flagged leader absences3. For each flagged chapter:   - Leader name   - Absence count (3+ out of last 10 meetings)   - Last attendance date   - Backup leader attendance4. Click "View Details"5. See full attendance history6. Options:   - Contact leader   - Assign new leader   - Close chapter**As a PUNC admin, I want to view chapter statistics**1. Navigate to Admin > Analytics2. View aggregated data:   - Total active chapters   - Total active members   - Meetings held this month   - Average attendance rate   - Curriculum module completion rates   - Commitment completion rates   - Member mood/value ratings over time3. Filter by:   - Date range   - Geographic region   - Chapter status (open/forming/closed)---## 5. API Endpoints### 5.1 Authentication & Users```POST   /api/auth/signupPOST   /api/auth/loginPOST   /api/auth/logoutGET    /api/users/mePATCH  /api/users/meGET    /api/users/:id/profile  // view another user's profile (chapter members only)```### 5.2 Chapters```GET    /api/chapters/search  // query params: lat, lng, radius_miles, statusGET    /api/chapters/:idPOST   /api/chapters  // PUNC admin onlyPATCH  /api/chapters/:id  // leader onlyDELETE /api/chapters/:id  // PUNC admin onlyGET    /api/chapters/:id/membersPOST   /api/chapters/:id/members  // onboard new member (leader/outreach)DELETE /api/chapters/:id/members/:user_id  // offboard member (leader)GET    /api/chapters/:id/rolesPOST   /api/chapters/:id/roles  // assign role (leader)DELETE /api/chapters/:id/roles/:role_id  // remove role (leader)```### 5.3 Meetings```GET    /api/chapters/:chapter_id/meetingsGET    /api/meetings/:idPOST   /api/meetings  // create/schedule meeting (leader)PATCH  /api/meetings/:id  // modify meeting (leader)DELETE /api/meetings/:id  // cancel meeting (leader)POST   /api/meetings/:id/start  // begin meeting flow (leader)POST   /api/meetings/:id/attendance  // record attendance (leader or self-check-in)POST   /api/meetings/:id/audio  // upload audio recording (leader)POST   /api/meetings/:id/validate  // validate meeting (leader)POST   /api/meetings/:id/feedback  // submit member feedback (member)```### 5.4 Attendance & RSVPs```GET    /api/meetings/:meeting_id/attendancePOST   /api/meetings/:meeting_id/rsvpPATCH  /api/meetings/:meeting_id/attendance/:user_id  // leader marks attendancePOST   /api/meetings/:meeting_id/checkin  // member self-check-in```### 5.5 Commitments```GET    /api/chapters/:chapter_id/commitmentsGET    /api/users/:user_id/commitmentsPOST   /api/commitments  // create commitmentPATCH  /api/commitments/:id  // update statusGET    /api/commitments/:id/discrepancies  // view flagged discrepancies (leader)```### 5.6 Funding & Donations```GET    /api/chapters/:chapter_id/funding  // get funding status, balance, breakdown (leader or contributing member)GET    /api/chapters/:chapter_id/ledger  // get transaction history (leader or contributing member)POST   /api/chapters/:chapter_id/ledger  // post manual adjustment (PUNC admin only)GET    /api/chapters/:chapter_id/donors  // list donors (leader only)POST   /api/chapters/:chapter_id/donors/:donor_id/thank-you  // send thank you email (leader)POST   /api/donations  // create donation (contributing member)GET    /api/donations/my-donations  // list user's donations (contributing member)PATCH  /api/donations/:id/cancel  // cancel recurring donation (contributing member)POST   /api/chapters/:chapter_id/members/:user_id/invite-contributing  // invite to contributing membership (leader)PATCH /api/chapters/:chapter_id/members/:user_id/member-type  // accept/decline contributing membership (member)GET    /api/chapters/support  // list chapters available for cross-chapter donations (contributing member)```### 5.7 Curriculum```GET    /api/curriculum/modules  // all PUNC modulesGET    /api/curriculum/modules/:idGET    /api/chapters/:chapter_id/curriculum/progressPOST   /api/chapters/:chapter_id/curriculum/progress  // update module progress (program leader)GET    /api/users/:user_id/badgesPOST   /api/users/:user_id/badges  // award badge (system automated)```### 5.8 Chapter Formation```POST   /api/formation/requests  // submit new chapter requestGET    /api/formation/requests  // PUNC admin view all requestsPATCH  /api/formation/requests/:id  // match to forming chapter (PUNC admin)GET    /api/formation/forming-chapters  // list of forming chapters for signup```### 5.9 PUNC Admin```GET    /api/admin/chapters  // all chapters with filtersGET    /api/admin/analytics  // aggregated statisticsGET    /api/admin/funding-analytics  // funding health metricsGET    /api/admin/validation-queue  // pending meeting validationsPATCH  /api/admin/validation-queue/:id  // mark validated for donorPOST   /api/admin/users/:user_id/certification  // grant leader certificationPATCH  /api/admin/users/:user_id/certification  // update expirationGET    /api/admin/flags  // leader absences, commitment discrepancies, funding deficits```---## 6. UI/UX Screens### 6.1 Public Pages**Landing Page (PUNChapters.org)**- Hero: "Find Your Brotherhood" with signup CTA- How it works (3-step visual)- Testimonials from members- "Find a Chapter Near You" map preview- Footer: About PUNC, Contact, Privacy**Signup Flow**- Step 1: Enter name, email, phone, address- Step 2: Choose username/nickname, set display preference- Step 3: Choose path:  - Search existing chapters (radius selector + map)  - View forming chapters (list)  - Request new chapter (confirmation)- Step 4: Confirmation email sent### 6.2 User Dashboard (Members)**My Dashboard**- Upcoming meetings (next 3)  - Date, time, location  - RSVP buttons  - Attendance status if past- My commitments (active)  - Description, recipient, deadline  - "Mark Complete" button  - Overdue indicator- My chapters (if member of 2)  - Quick switch between chapters- Quick stats:  - Meetings attended  - Commitments completed  - Badges earned**My Profile**- Personal info (editable)- Display preference toggle- Roles in chapters- Badges (grid with completion dates)- Curriculum progress (progress bars)- Full commitment history- Attendance history**Chapter View (Member Perspective)**- Chapter name, status (open/closed)- Next meeting details- Member roster (names, roles, attendance %)- Recent meetings (list)- Chapter commitments (all members, filterable)### 6.3 Leader Dashboard**Chapter Management**- Chapter overview  - Name, status toggle (open/closed)  - Member count (X/12)  - Next meeting countdown- Quick actions:  - Schedule meeting  - Start today's meeting  - View members  - Assign roles- Alerts:  - Pending membership applications  - Flagged commitment discrepancies  - Upcoming meeting needs RSVP reminder**Meeting Runner Interface**- Progress bar (attendance ? lightning round ? main topic ? commitments ? audio ? feedback)- **Attendance Step**  - Member list with checkboxes (in-person/video/absent)  - OR: "Enable Self-Check-In" button- **Lightning Round Step**  - Member name + 3-minute timer (auto-advances)  - Commitment status prompt for each member- **Main Topic Step**  - Curriculum module display (if selected)    - Exercises, prompts, assignments  - OR: Freeform topic entry- **Commitment Step**  - Prompt each member to create commitment  - Form: type, description, recipient, deadline- **Audio Recording Step**  - "Start Recording" button  - Waveform visualization  - "Stop Recording" button  - Playback controls- **Feedback Step**  - Prompt members to submit feedback forms  - Progress indicator (X/Y submitted)- "End Meeting" button**Meeting Validation Interface**- Meeting details (date, time, location, duration)- Attendance list (in-person/video counts)- Topic- Audio player- Checkboxes for representations:  - ? Meeting took place as scheduled  - ? Attendance is accurate  - ? Topic is accurate  - ? Audio reflects genuine member feedback- "Submit for Validation" button**Membership Management**- Pending applications (approve/reject)- Current members (list with roles)- "Onboard New Member" button (manual add)- "Offboard Member" button (deactivate)**Role Assignment**- Member list- Role dropdowns (Chapter Leader, Backup Leader, Outreach Leader, Program Leader, Custom)- "Add Custom Role" modal (free text entry)- Save button**Funding Dashboard (Leader View)**- Funding status card:  - Badge: "Fully Funded" (green) / "80% Funded" (yellow) / "Deficit" (red)  - Current balance: "$120 surplus" or "$45 deficit"  - Monthly cost: "$55"- Funding breakdown (pie chart or bars):  - External donors: $X  - Chapter members: $Y  - Deficit/surplus: $Z- 12-month trend chart (balance over time)- Controls:  - Toggle "Show funding to chapter" (enables/disables member visibility)  - "Invite Contributing Members" button- Donors tab:  - List of donors (chapter members, cross-chapter, external)  - "Send Thank You" buttons  - Last contact date- Ledger tab:  - Transaction history (scrollable list)  - Filter by: month, transaction type  - Export CSV### 6.4 Contributing Member Dashboard**Funding Panel (on Chapter Dashboard)**- Funding status display:  - "Our chapter is 80% funded this month"  - Progress bar (visual representation of $44/$55)  - Breakdown: "2 external donors + 3 members"- "Support Our Chapter" button- "My Donations" quick link**Support Other Chapters Interface**- Browse chapters:  - Filter: in deficit, forming, near me (radius slider)  - Sort: by deficit amount, proximity, recent activity- Chapter cards:  - Chapter name/number (anonymized if needed)  - Location (city, state)  - Funding status: "Needs $30 to reach $55/month"  - Recent topics (3 most recent)  - Member count  - "Support" button- Donation modal:  - Amount selector ($5, $10, $20, custom)  - Frequency (one-time, monthly)  - Attribution (anonymous, show to leader, show to chapter)  - Optional message to leader  - Payment form (Stripe)  - "Donate" button**My Donations Management**- Active donations list:  - Chapter name  - Amount, frequency  - Next charge date  - Total contributed to date  - "Cancel" button (for recurring)- Past donations (archive):  - Cancelled donations  - One-time contributions- Total impact summary:  - Total donated across all chapters  - Chapters supported (count)### 6.5 Program Leader Dashboard**Curriculum Manager**- Available modules (grid with descriptions)- "Select for Next Meeting" buttons- Current module progress:  - Chapter members' completion status  - Insights entered  - Benefits entered- "Enter Insights" form- "Award Badges" button (after module completion)### 6.6 Outreach Leader Dashboard**Membership Funnel**- Applications (pending, approved, rejected counts)- Application detail view (applicant profile)- "Approve" / "Reject" buttons**Community Activities**- Service projects (list)- "Create New Project" button- Project detail view:  - Description, date, location  - Member signups  - Commitment tracking### 6.7 PUNC Admin Dashboard**Chapter Health Overview**- Map view of all chapters (color-coded by status)- Filters: status, region, leader certification, funding status- Chapter list (sortable by attendance rate, member count, last meeting, funding deficit)**Funding Analytics Dashboard**- KPI cards:  - Total chapters: X fully funded, Y partially funded, Z in deficit  - Total member contributions this month: $X  - Total external donor contributions: $Y  - Average deficit per chapter: $Z- Charts:  - Funding health trend (12 months, line chart)  - Deficit distribution (histogram)  - Member vs external donor ratio (pie chart)- Chapter funding table:  - Chapter name, funding status, balance, last contribution  - Sort/filter options  - "View Details" links- Flagged chapters (6+ months deficit):  - Chapter name, total deficit, months in deficit  - "Contact Leader" / "Post Adjustment" buttons**Formation Queue**- Geographic clusters of waitlisted users- Auto-suggested matches- "Create New Chapter" workflow:  - Select users to match  - Assign certified leader  - Set initial meeting location  - Send invitations**Meeting Validation Queue**- List of validated meetings awaiting donor processing- Meeting details (chapter, date, attendance, audio)- "Validate for Donor" button- "Transfer to Direct Outcomes" button- Export CSV functionality**Leader Certification Manager**- User search- Certification status (certified/not certified)- "Grant Certification" form:  - Certification date  - Expiration date (or "No expiration")- "Revoke Certification" button**Analytics Dashboard**- KPI cards:  - Total active chapters  - Total active members  - Meetings this month  - Average attendance rate- Charts:  - Chapter growth over time (line chart)  - Geographic distribution (map heatmap)  - Curriculum module popularity (bar chart)  - Member mood ratings over time (line chart)- Filters: date range, region, chapter status**Flagged Issues**- Tabs: Leader Absences, Commitment Discrepancies- **Leader Absences:**  - Chapter, leader name, absence count (3+ out of 10)  - "View Details" ? full attendance history  - "Contact Leader" / "Reassign" buttons- **Commitment Discrepancies:**  - Chapter, member names, commitment description  - Self-reported vs recipient-reported status  - "View Conversation" ? discussion thread  - "Mark Resolved" button---## 7. Non-Functional Requirements### 7.1 Mobile Responsiveness- All screens optimized for mobile (375px min width)- Touch-friendly tap targets (44px min)- Progressive Web App (PWA) capabilities for offline RSVP caching### 7.2 Performance- Page load time < 2 seconds- Meeting runner interface supports real-time updates (WebSocket or polling)- Audio recording supports large files (up to 50MB, ~30 minutes)### 7.3 Privacy & Anonymization- Display name preference enforced in all contexts (profiles, meeting records, donor reports)- Audio transcripts scrub real names if username preference selected- Donor reports show only:  - Chapter name (can be anonymized, e.g., "Chapter 47")  - Meeting date, topic  - Attendance count (not individual names)  - Audio/transcript of reflections (with usernames if applicable)### 7.4 Data Retention- Deleted users: anonymize data (replace name/email with "Deleted User [ID]")- Retain meeting records indefinitely for PUNC analytics- Audio recordings: retain for 7 years (funding compliance)### 7.5 Notifications- Email notifications:  - Meeting reminders (1 week, 1 day before)  - RSVP requests  - Membership application status  - Commitment discrepancy alerts  - Chapter formation invitations- SMS notifications (optional, user preference):  - Same-day meeting reminders  - Urgent chapter updates- In-app notifications:  - New commitments assigned to you  - Meeting starting soon  - Flagged issues (leaders)### 7.6 Accessibility- WCAG 2.1 AA compliance- Keyboard navigation for all workflows- Screen reader support for meeting runner- Alt text for all badges and icons### 7.7 Security- HTTPS only- JWT authentication- Role-based access control (RBAC) enforced at API layer- Audio recordings stored securely (S3 with signed URLs, 1-hour expiration)- Leader certification cannot be self-granted (requires PUNC admin)---## 8. Integration Points### 8.1 Direct Outcomes (External Service)- **Purpose:** Donor fund collection and distribution- **Integration:** Manual CSV export from PUNC admin dashboard- **Data Transferred:**  - Meeting ID, chapter ID  - Meeting date, topic  - Attendance count  - Audio recording URL (signed, temporary)  - Validation timestamp### 8.2 Email Service (TBD)- **Use Cases:** Meeting reminders, membership notifications, chapter formation invitations- **Requirements:**  - Templating support  - Scheduled sends (1 week, 1 day before)  - Delivery tracking- **Recommended:** SendGrid, AWS SES, or Resend### 8.3 SMS Service (TBD)- **Use Cases:** Same-day meeting reminders, urgent alerts- **Requirements:**  - US phone number support  - Opt-in/opt-out management- **Recommended:** Twilio### 8.4 Audio Recording- **Option A (Preferred):** In-app recording via MediaRecorder API  - Browser-based recording (no external service)  - Upload to Supabase Storage- **Option B (Fallback):** Manual upload  - Leader records on phone/device  - Uploads file during meeting validation### 8.5 Payment Processing- **Service:** Stripe (recommended) or PayPal- **Use Cases:**  - Member donations to own chapter  - Cross-chapter donations  - Recurring monthly contributions- **Requirements:**  - PCI compliance (handled by payment provider)  - Easy cancellation flow  - Webhook support for recurring payment failures  - Support for anonymous/attributed donations- **Integration:**  - Stripe Checkout for one-time donations  - Stripe Subscriptions for recurring donations  - ChapterLedger entries created on successful payment  - Email receipts auto-sent---## 9. Development Phases### Phase 1: Core Chapter Management (MVP)- User signup and authentication- Chapter creation (admin only)- Manual member onboarding by leader- Meeting scheduling (recurring)- RSVP system- Basic attendance tracking (leader manual)- Meeting feedback form (1-10 rating)- Member profile with stats**Deliverable:** Leaders can create chapters, schedule meetings, and track basic attendance.### Phase 2: Meeting Runner & Commitments- Meeting runner interface with step-by-step flow- Attendance self-check-in- Lightning Round timer- Commitment creation and tracking- Commitment discrepancy detection- Audio recording (in-app or upload)- Meeting validation workflow**Deliverable:** Leaders can facilitate structured meetings and validate them for funding.### Phase 3: Curriculum & Badges- PUNC curriculum module library- Program leader curriculum selection- Module content display during meetings- Curriculum progress tracking- Badge awarding system- Member profile with badges**Deliverable:** Chapters can progress through PUNC curriculum and members earn badges.### Phase 4: Chapter Formation & Discovery- Public chapter search (radius-based)- Membership application workflow- Chapter formation request system- PUNC admin formation queue- Auto-matching suggestions- Forming chapter waitlist**Deliverable:** New users can discover and join chapters, and PUNC can form new chapters from waitlists.### Phase 5: Advanced Features & Admin Tools- Outreach leader service project management- Custom role creation- Leader absence flagging- PUNC admin analytics dashboard- Meeting validation queue for donors- Export to Direct Outcomes- Leader certification management- **Tiered membership (contributing members)**- **Chapter funding dashboard and ledger**- **Donation system (own chapter + cross-chapter)**- **Stripe/PayPal payment integration**- **Funding analytics for PUNC admin**- **Monthly debit automation****Deliverable:** Full-featured app with PUNC oversight, donor funding pipeline, and chapter financial management.---## 10. Open Questions & Decisions Needed### 10.1 Technical- [ ] Audio recording: in-app via MediaRecorder API or external service (e.g., Twilio Voice)?- [ ] Real-time updates in meeting runner: WebSockets or polling?- [ ] Email service selection: SendGrid, AWS SES, or Resend?- [ ] SMS service: Twilio or alternative?- [ ] Map display for chapter search: Mapbox, Google Maps, or Leaflet?### 10.2 Product- [ ] Chapter formation threshold: exactly 5 members or 5+ minimum?- [ ] Leader absence flag: should it auto-escalate after X days without resolution?- [ ] Commitment discrepancy: allow members to discuss in-app or just flag for leader?- [ ] Badge display: just icons or include descriptions/criteria on member profile?- [ ] Custom roles: unlimited or cap at X custom roles per chapter?- [ ] Video meetings: should there be a chapter-level policy setting or always allowed as exception?### 10.3 Business- [ ] Chapter naming: auto-generated (e.g., "Chapter 47") or leader chooses?- [ ] Donor reporting: fully automated delivery to Direct Outcomes or manual review required?- [ ] Leader certification renewal: automatic reminder X months before expiration?- [ ] Member data export: should members be able to export their own data (GDPR/privacy compliance)?---## 11. Success Metrics### 11.1 Engagement- Average meetings per chapter per month: target 2+- Average attendance rate: target 80%+- Member retention (active for 6+ months): target 70%+- Commitment completion rate: target 60%+### 11.2 Growth- New chapters formed per month: target 5+- New members onboarded per month: target 50+- Chapter formation request ? formed chapter conversion: target 40%+### 11.3 Quality- Meeting validation rate (validated / held): target 90%+- Average meeting value rating: target 7+/10- Leader certification completion rate: target 80%+ of active leaders### 11.4 Funding Health- Chapters fully funded: target 60%+- Chapters in 6+ month deficit: target <10%- Member contribution rate (contributing members / total members): target 40%+- Average member contribution: target $15/month- Cross-chapter donation participation: target 20%+ of contributing members### 11.5 PUNC Oversight- Leader absence flags resolved within 30 days: target 80%+- Commitment discrepancies resolved within 1 meeting cycle: target 70%+- Validated meetings transferred to Direct Outcomes within 7 days: target 95%+---## 12. Handoff Plan### 12.1 Repository Access- GitHub repository shared with PUNC team- Branch protection rules: main requires PR approval- README with setup instructions (local dev, deployment)### 12.2 Infrastructure Transfer- Vercel project ownership transferred to PUNC account- Supabase project ownership transferred to PUNC account- Domain (PUNChapters.org) transferred to PUNC registrar- Email/SMS service accounts transferred to PUNC### 12.3 Documentation- API documentation (OpenAPI spec)- Database schema diagram- User role permissions matrix- Admin operational guides:  - How to grant leader certifications  - How to process meeting validations  - How to match chapter formation requests- Developer onboarding guide### 12.4 Costs (Estimated)- **Claude Code:** ~$20/month during development- **Vercel (Pro):** $20/month (for production-grade hosting)- **Supabase (Pro):** $25/month (for 8GB database, 100GB bandwidth)- **Email service:** ~$10-50/month (depends on volume)- **SMS service:** ~$0.01/message (optional)- **Stripe:** 2.9% + $0.30 per transaction (only charged on successful donations)- **Domain:** $12/year- **Total:** ~$75-125/month operational costs + payment processing fees---## 13. Appendix### 13.1 Glossary- **Chapter:** A group of 5-12 men meeting 1-2x/month- **Curriculum Module:** PUNC-provided structured content for a meeting topic- **Commitment:** A promise made by a member to the chapter or another member- **Stretch Goal:** A commitment to attempt something challenging and report back- **Lightning Round:** Opening check-in where each member shares what's up in life- **Meeting Validation:** Leader's formal attestation that a meeting occurred as reported- **Direct Outcomes:** External service that processes donor funds for PUNC- **Badge:** Award for completing a curriculum module- **Forming Chapter:** A chapter in the process of recruiting initial 5 members- **PUNC HQ:** Project UNcivilized headquarters/admin team- **Regular Member:** Chapter member without access to funding features- **Contributing Member:** Chapter member opted-in to see funding status and donate- **Chapter Ledger:** Transaction history tracking $55/month cost and contributions- **Funding Status:** Calculated monthly indicator (fully funded, partially funded, deficit, surplus)- **Cross-Chapter Donation:** Contributing member donating to a chapter other than their own- **Attribution:** Donor's choice to remain anonymous or have name shown to leader/chapter### 13.2 User Scenarios**Scenario 1: New Member Journey**1. Tom visits PUNChapters.org after hearing about PUNC from a friend2. Signs up with his info, chooses username "TomTheBuilder"3. Searches for chapters within 25 miles of his home4. Finds "The Oak Chapter" meeting 10 miles away5. Applies to join with a brief message6. Chapter leader Jake reviews and approves7. Tom receives welcome email with next meeting details8. Tom RSVPs "Yes" for next Saturday9. At meeting, Tom self-checks-in via app10. During Lightning Round, Tom shares what's up and his first stretch goal11. At meeting end, Tom rates value 8/1012. Next week, Tom updates his stretch goal status to "completed"**Scenario 2: Chapter Leader Running a Meeting**1. Sarah is Chapter Leader of "The Willow Chapter"2. Saturday morning, she opens app and clicks "Start Meeting"3. Members self-check-in as they arrive4. Sarah starts Lightning Round timer for first member, Mike5. Mike shares his update, marks his commitment from last week as complete6. Timer auto-advances to next member after 3 minutes7. After all members check in, Sarah selects today's curriculum topic: "Fear of Men"8. She reads aloud the module prompts and facilitates discussion9. After 45 minutes, app prompts commitment creation10. Each member enters a new stretch goal or commitment to another member11. Sarah clicks "Start Recording" for final reflections12. Members share what they got out of the meeting (3 minutes total)13. Sarah clicks "Stop Recording" and ends meeting14. She validates the meeting by confirming details and representations15. Meeting submitted to PUNC validation queue**Scenario 3: PUNC Admin Forming a New Chapter**1. PUNC admin Lisa logs in and navigates to Formation Queue2. She sees 7 waitlisted users in Austin, TX area (within 15 miles of each other)3. System auto-suggests creating "Austin Chapter 3"4. Lisa reviews the users: 6 regular members + 1 certified leader (Marcus)5. She assigns Marcus as Chapter Leader6. System sends email to all 7: "Chapter is forming at [address], join? Y/N"7. 6 users click "Yes", 1 clicks "No"8. Lisa confirms the 6 members and creates the chapter9. Chapter status set to "forming"10. Marcus schedules first meeting for 2 weeks from now11. After first meeting, chapter status auto-updates to "open"**Scenario 4: Contributing Member Supporting Multiple Chapters**1. Alex is a contributing member of "The Oak Chapter"2. He navigates to Chapter Dashboard and sees funding status: "Chapter is 90% funded"3. He clicks "Support Our Chapter" and sets up $10/month recurring donation (attributed to leader)4. Next week, he explores "Support Other Chapters"5. He filters for "Chapters in deficit within 50 miles"6. Finds "Chapter 47 - Austin" needing $25 to reach $55/month7. Reviews their recent topics: "Fear of Men, Relationships, Leadership"8. Clicks "Support" and donates one-time $25 (anonymous)9. Sends message to Chapter 47 leader: "Keep up the great work!"10. Chapter 47 leader receives notification of cross-chapter support11. Alex sees both donations in "My Donations" dashboard12. 3 months later, decides to cancel recurring donation to own chapter13. Clicks "Cancel" next to The Oak Chapter donation14. Confirms in modal, receives email confirmation15. Donation stops immediately, no future charges### 13.3 Design Considerations**Mobile-First:** Most members will access the app on their phones, especially during meetings for self-check-in and commitment updates. Prioritize touch-friendly UI and minimal data entry.**Offline Resilience:** Meetings may occur in locations with poor connectivity. Cache meeting runner state and sync when connection restored.**Audio Quality:** Meeting reflections are the core artifact for donor funding. Ensure clear recording instructions and quality checks before upload.**Privacy Balance:** Members need visibility into each other's commitments and stats for accountability, but display names must be respected. Never leak real names when username preference is set.**Leader Workload:** Minimize friction for leaders. Meeting runner should guide them step-by-step. Validation should be quick (< 2 minutes). Avoid requiring extensive data entry.**PUNC Oversight:** Admins need high-level visibility into chapter health without micromanaging. Focus on exception-based alerts (leader absences, commitment discrepancies) rather than requiring constant monitoring.**Scalability:** Start with 10-20 chapters in MVP, but design for 100+ chapters within 1 year. Database queries must be optimized for chapter search and analytics.---**End of Specification***This document is intended for implementation via Claude Code and should be refined iteratively based on user feedback during prototype development.*Page 15 of 34